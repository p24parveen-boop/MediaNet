<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdGenie - Campaign Anomaly Detection System</title>
    <style>
:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

code,
pre {
  font-family: var(--font-family-mono);
  font-size: calc(var(--font-size-base) * 0.95);
  background-color: var(--color-secondary);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-1) var(--space-4);
}

pre {
  padding: var(--space-16);
  margin: var(--space-16) 0;
  overflow: auto;
  border: 1px solid var(--color-border);
}

pre code {
  background: none;
  padding: 0;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

textarea.form-control {
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

/* Add a dark mode specific caret */
@media (prefers-color-scheme: dark) {
  select.form-control {
    background-image: var(--select-caret-dark);
  }
}

/* Also handle data-color-scheme */
[data-color-scheme="dark"] select.form-control {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] select.form-control {
  background-image: var(--select-caret-light);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

.card__header,
.card__footer {
  padding: var(--space-16);
  border-bottom: 1px solid var(--color-card-border-inner);
}

/* Status indicators - simplified with CSS variables */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--error {
  background-color: rgba(
    var(--color-error-rgb, 192, 21, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-error);
  border: 1px solid
    rgba(var(--color-error-rgb, 192, 21, 47), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.m-0 {
  margin: 0;
}
.mt-8 {
  margin-top: var(--space-8);
}
.mb-8 {
  margin-bottom: var(--space-8);
}
.mx-8 {
  margin-left: var(--space-8);
  margin-right: var(--space-8);
}
.my-8 {
  margin-top: var(--space-8);
  margin-bottom: var(--space-8);
}

.p-0 {
  padding: 0;
}
.py-8 {
  padding-top: var(--space-8);
  padding-bottom: var(--space-8);
}
.px-8 {
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}
.py-16 {
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}
.px-16 {
  padding-left: var(--space-16);
  padding-right: var(--space-16);
}

.block {
  display: block;
}
.hidden {
  display: none;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Dark mode specifics */
[data-color-scheme="dark"] .btn--outline {
  border: 1px solid var(--color-border-secondary);
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* END PERPLEXITY DESIGN SYSTEM */
/* Application-specific styles */
.app-container {
  display: flex;
  min-height: 100vh;
  background-color: var(--color-background);
}

/* Sidebar Navigation */
.sidebar {
  width: 280px;
  background-color: var(--color-surface);
  border-right: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  position: fixed;
  height: 100vh;
  overflow-y: auto;
}

.sidebar-header {
  padding: var(--space-24) var(--space-20);
  border-bottom: 1px solid var(--color-border);
}

.sidebar-title {
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  margin: 0;
  letter-spacing: -0.02em;
  font-family: var(--font-family-base);
}

.sidebar-subtitle {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin: var(--space-4) 0 0 0;
  font-weight: var(--font-weight-medium);
}

.nav-tabs {
  padding: var(--space-16) 0;
}

.nav-tab {
  display: flex;
  align-items: center;
  width: 100%;
  padding: var(--space-12) var(--space-20);
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-standard);
  border-left: 3px solid transparent;
}

.nav-tab:hover {
  background-color: var(--color-secondary);
  color: var(--color-text);
}

.nav-tab.active {
  background-color: var(--color-secondary);
  color: var(--color-primary);
  border-left-color: var(--color-primary);
}

.nav-icon {
  margin-right: var(--space-12);
  font-size: var(--font-size-lg);
}

/* Main Content */
.main-content {
  flex: 1;
  margin-left: 280px;
  padding: var(--space-24);
  overflow-y: auto;
}

.content-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-24);
  flex-wrap: wrap;
  gap: var(--space-16);
}

.content-header h2 {
  color: var(--color-text);
  font-size: var(--font-size-3xl);
  margin: 0;
}

.header-controls {
  display: flex;
  gap: var(--space-12);
  align-items: center;
}

.search-input {
  min-width: 250px;
}

/* Tab Content */
.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
}

/* Summary Grid */
.summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--space-20);
  margin-bottom: var(--space-24);
}

.summary-card {
  background-color: var(--color-surface);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-20);
  display: flex;
  align-items: center;
  gap: var(--space-16);
  transition: transform var(--duration-fast) var(--ease-standard);
}

.summary-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.summary-icon {
  font-size: 2rem;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--color-bg-1);
  border-radius: var(--radius-md);
}

.summary-content h3 {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
  margin: 0 0 var(--space-4) 0;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.summary-value {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text);
  margin: 0 0 var(--space-6) 0;
  transition: all var(--duration-normal) var(--ease-standard);
  position: relative;
}

.summary-change {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  transition: all var(--duration-normal) var(--ease-standard);
}

.summary-change.positive {
  color: var(--color-success);
}

.summary-change.negative {
  color: var(--color-error);
}

.summary-change.critical {
  color: var(--color-error);
  background-color: rgba(var(--color-error-rgb), 0.1);
  padding: var(--space-2) var(--space-6);
  border-radius: var(--radius-sm);
}

/* Live Data Animation Classes */
.metric-value {
  transition: all var(--duration-normal) var(--ease-standard);
  position: relative;
  display: inline-block;
}

.metric-value.updating-increase {
  color: var(--color-success) !important;
  transform: scale(1.05);
}

.metric-value.updating-decrease {
  color: var(--color-error) !important;
  transform: scale(1.05);
}

.metric-value::after {
  content: '';
  position: absolute;
  top: -2px;
  right: -20px;
  font-size: var(--font-size-sm);
  opacity: 0;
  transition: opacity var(--duration-normal) var(--ease-standard);
}

.metric-value.updating-increase::after {
  content: '‚Üó';
  color: var(--color-success);
  opacity: 1;
}

.metric-value.updating-decrease::after {
  content: '‚Üò';
  color: var(--color-error);
  opacity: 1;
}

@keyframes valueUpdate {
  0% { 
    transform: scale(1);
    opacity: 1;
  }
  50% { 
    transform: scale(1.1);
    opacity: 0.8;
  }
  100% { 
    transform: scale(1);
    opacity: 1;
  }
}

.metric-update-animation {
  animation: valueUpdate 0.8s var(--ease-standard);
}

/* Table Styles */
.table-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-20);
}

.table-header h3 {
  margin: 0;
  color: var(--color-text);
}

.table-controls {
  display: flex;
  gap: var(--space-12);
}

.table-container {
  overflow-x: auto;
  border-radius: var(--radius-base);
  border: 1px solid var(--color-card-border);
}

.campaigns-table,
.team-table,
.rules-table {
  width: 100%;
  border-collapse: collapse;
  background-color: var(--color-surface);
}

.campaigns-table th,
.campaigns-table td,
.team-table th,
.team-table td,
.rules-table th,
.rules-table td {
  padding: var(--space-12) var(--space-16);
  text-align: left;
  border-bottom: 1px solid var(--color-card-border);
}

.campaigns-table th,
.team-table th,
.rules-table th {
  background-color: var(--color-bg-2);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text);
  font-size: var(--font-size-sm);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  cursor: pointer;
  user-select: none;
}

.campaigns-table th:hover,
.team-table th:hover,
.rules-table th:hover {
  background-color: var(--color-bg-3);
}

.sort-indicator {
  margin-left: var(--space-4);
  opacity: 0.5;
}

.platform-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-6);
  padding: var(--space-4) var(--space-8);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
}

.platform-badge.google {
  background-color: var(--color-bg-1);
  color: var(--color-primary);
}

.platform-badge.meta {
  background-color: var(--color-bg-4);
  color: var(--color-error);
}

.platform-badge.tiktok {
  background-color: var(--color-bg-7);
  color: var(--color-text);
}

.status-badge {
  padding: var(--space-4) var(--space-8);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.status-badge.active {
  background-color: rgba(var(--color-success-rgb), 0.15);
  color: var(--color-success);
}

.status-badge.paused {
  background-color: rgba(var(--color-warning-rgb), 0.15);
  color: var(--color-warning);
}

.alert-indicator {
  display: inline-flex;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-4) var(--space-8);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
}

.alert-indicator.normal {
  background-color: rgba(var(--color-success-rgb), 0.15);
  color: var(--color-success);
}

.alert-indicator.warning {
  background-color: rgba(var(--color-warning-rgb), 0.15);
  color: var(--color-warning);
}

.alert-indicator.critical {
  background-color: rgba(var(--color-error-rgb), 0.15);
  color: var(--color-error);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* On-Call Roster Styles */
.oncall-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: var(--space-20);
}

.oncall-card {
  border: 2px solid var(--color-card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-20);
}

.oncall-card.primary {
  border-color: var(--color-primary);
  background-color: rgba(var(--color-teal-500-rgb), 0.05);
}

.oncall-card.secondary {
  border-color: var(--color-warning);
  background-color: rgba(var(--color-warning-rgb), 0.05);
}

.oncall-card h4 {
  margin: 0 0 var(--space-16) 0;
  color: var(--color-text);
  font-size: var(--font-size-lg);
}

.oncall-member {
  display: flex;
  align-items: flex-start;
  gap: var(--space-16);
}

.member-avatar {
  width: 60px;
  height: 60px;
  border-radius: var(--radius-full);
  background-color: var(--color-primary);
  color: var(--color-btn-primary-text);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--font-weight-bold);
  font-size: var(--font-size-lg);
}

.member-info h5 {
  margin: 0 0 var(--space-4) 0;
  color: var(--color-text);
  font-size: var(--font-size-lg);
}

.member-info p {
  margin: 0 0 var(--space-12) 0;
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
}

.contact-info {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.contact-info span {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

/* Alert Management Styles */
.active-alerts-container {
  display: flex;
  flex-direction: column;
  gap: var(--space-12);
}

.alert-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-16);
  border: 1px solid var(--color-card-border);
  border-radius: var(--radius-base);
  background-color: var(--color-surface);
}

.alert-item.critical {
  border-color: var(--color-error);
  background-color: rgba(var(--color-error-rgb), 0.05);
}

.alert-item.acknowledged {
  border-color: var(--color-warning);
  background-color: rgba(var(--color-warning-rgb), 0.05);
}

.alert-content {
  flex: 1;
}

.alert-title {
  font-weight: var(--font-weight-semibold);
  color: var(--color-text);
  margin: 0 0 var(--space-4) 0;
}

.alert-message {
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  margin: 0 0 var(--space-8) 0;
}

.alert-meta {
  display: flex;
  gap: var(--space-16);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}

.alert-actions {
  display: flex;
  gap: var(--space-8);
}

/* Modal Styles */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal.hidden {
  display: none;
}

.modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6);
}

.modal-content {
  position: relative;
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  overflow-y: auto;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-20);
  border-bottom: 1px solid var(--color-card-border);
}

.modal-header h3 {
  margin: 0;
  color: var(--color-text);
}

.modal-close {
  background: none;
  border: none;
  font-size: var(--font-size-2xl);
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: var(--space-4);
  line-height: 1;
}

.modal-close:hover {
  color: var(--color-text);
}

.modal-body {
  padding: var(--space-20);
}

.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-12);
  margin-top: var(--space-20);
}

/* Form Styles */
.checkbox-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-8);
}

.checkbox-group label {
  display: flex;
  align-items: center;
  gap: var(--space-8);
  font-size: var(--font-size-sm);
  color: var(--color-text);
  cursor: pointer;
}

.checkbox-group input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: var(--color-primary);
}

/* Action Buttons */
.action-btn {
  padding: var(--space-4) var(--space-8);
  border: none;
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-standard);
}

.action-btn.edit {
  background-color: var(--color-bg-2);
  color: var(--color-text);
}

.action-btn.delete {
  background-color: rgba(var(--color-error-rgb), 0.1);
  color: var(--color-error);
}

.action-btn:hover {
  transform: translateY(-1px);
}

.priority-badge {
  padding: var(--space-2) var(--space-6);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-bold);
  text-transform: uppercase;
}

.priority-badge.P0 {
  background-color: rgba(var(--color-error-rgb), 0.15);
  color: var(--color-error);
}

.priority-badge.P1 {
  background-color: rgba(var(--color-warning-rgb), 0.15);
  color: var(--color-warning);
}

.priority-badge.P2 {
  background-color: rgba(var(--color-info-rgb), 0.15);
  color: var(--color-info);
}

/* Percentage change indicators */
.percentage-change {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-sm);
  margin-left: var(--space-8);
  transition: all var(--duration-normal) var(--ease-standard);
  opacity: 0;
}

.percentage-change.show {
  opacity: 1;
}

.percentage-change.positive {
  background-color: rgba(var(--color-success-rgb), 0.15);
  color: var(--color-success);
}

.percentage-change.negative {
  background-color: rgba(var(--color-error-rgb), 0.15);
  color: var(--color-error);
}

/* Responsive Design */
@media (max-width: 768px) {
  .sidebar {
    width: 100%;
    position: relative;
    height: auto;
  }
  
  .main-content {
    margin-left: 0;
  }
  
  .content-header {
    flex-direction: column;
    align-items: stretch;
  }
  
  .header-controls {
    flex-wrap: wrap;
  }
  
  .search-input {
    min-width: auto;
    flex: 1;
  }
  
  .summary-grid {
    grid-template-columns: 1fr;
  }
  
  .oncall-grid {
    grid-template-columns: 1fr;
  }
  
  .table-container {
    font-size: var(--font-size-sm);
  }
  
  .campaigns-table th,
  .campaigns-table td,
  .team-table th,
  .team-table td,
  .rules-table th,
  .rules-table td {
    padding: var(--space-8) var(--space-12);
  }
}

@media (max-width: 480px) {
  .main-content {
    padding: var(--space-16);
  }
  
  .modal-content {
    width: 95%;
  }
  
  .modal-body {
    padding: var(--space-16);
  }
}
</style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">AdGenie</h1>
                <p class="sidebar-subtitle">Campaign Anomaly Detection</p>
            </div>
            
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="dashboard">
                    <span class="nav-icon">üìä</span>
                    Dashboard
                </button>
                <button class="nav-tab" data-tab="roster">
                    <span class="nav-icon">üë•</span>
                    On-Call Roster
                </button>
                <button class="nav-tab" data-tab="alerts">
                    <span class="nav-icon">üö®</span>
                    Alert Management
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <div class="content-header">
                    <h2>Campaign Dashboard</h2>
                    <div class="header-controls">
                        <select class="form-control time-period">
                            <option value="7d">Last 7 days</option>
                            <option value="30d" selected>Last 30 days</option>
                            <option value="90d">Last 90 days</option>
                        </select>
                        <input type="text" class="form-control search-input" placeholder="Search campaigns...">
                    </div>
                </div>

                <!-- Summary Cards -->
                <div class="summary-grid">
                    <div class="summary-card">
                        <div class="summary-icon">üí∞</div>
                        <div class="summary-content">
                            <h3>Total Spend</h3>
                            <p class="summary-value" data-metric="totalSpend">$42,272.40</p>
                            <span class="summary-change" data-change="totalSpend">+12.3%</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">üëÅÔ∏è</div>
                        <div class="summary-content">
                            <h3>Impressions</h3>
                            <p class="summary-value" data-metric="totalImpressions">915,360</p>
                            <span class="summary-change" data-change="totalImpressions">+8.7%</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">üéØ</div>
                        <div class="summary-content">
                            <h3>Conversions</h3>
                            <p class="summary-value" data-metric="totalConversions">1,691</p>
                            <span class="summary-change" data-change="totalConversions">-2.1%</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">üö®</div>
                        <div class="summary-content">
                            <h3>Active Alerts</h3>
                            <p class="summary-value" data-metric="activeAlerts">2</p>
                            <span class="summary-change critical">Critical</span>
                        </div>
                    </div>
                </div>

                <!-- Campaign Table -->
                <div class="card">
                    <div class="card__body">
                        <div class="table-header">
                            <h3>Campaign Performance</h3>
                            <div class="table-controls">
                                <select class="form-control platform-filter">
                                    <option value="all">All Platforms</option>
                                    <option value="google">Google</option>
                                    <option value="meta">Meta</option>
                                    <option value="tiktok">TikTok</option>
                                </select>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="campaigns-table" id="campaigns-table">
                                <thead>
                                    <tr>
                                        <th data-sort="name">Campaign <span class="sort-indicator">‚ÜïÔ∏è</span></th>
                                        <th data-sort="platform">Platform</th>
                                        <th data-sort="status">Status</th>
                                        <th data-sort="spend">Spend</th>
                                        <th data-sort="impressions">Impressions</th>
                                        <th data-sort="ctr">CTR</th>
                                        <th data-sort="cpc">CPC</th>
                                        <th data-sort="conversions">Conversions</th>
                                        <th>Alert Status</th>
                                    </tr>
                                </thead>
                                <tbody id="campaigns-tbody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- On-Call Roster Tab -->
            <div class="tab-content" id="roster">
                <div class="content-header">
                    <h2>On-Call Roster Management</h2>
                    <button class="btn btn--primary" id="add-member-btn">+ Add Team Member</button>
                </div>

                <!-- Current On-Call -->
                <div class="card">
                    <div class="card__header">
                        <h3>Current On-Call Status</h3>
                    </div>
                    <div class="card__body">
                        <div class="oncall-grid">
                            <div class="oncall-card primary">
                                <h4>Primary On-Call</h4>
                                <div class="oncall-member">
                                    <div class="member-avatar">SC</div>
                                    <div class="member-info">
                                        <h5>Pooja Sharma</h5>
                                        <p>Campaign Manager</p>
                                        <div class="contact-info">
                                            <span>üìß pooja.sharma@adgenie.net</span>
                                            <span>üì± +1-555-0123</span>
                                            <span>üí¨ @pooja.sharma</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="oncall-card secondary">
                                <h4>Secondary On-Call</h4>
                                <div class="oncall-member">
                                    <div class="member-avatar">MR</div>
                                    <div class="member-info">
                                        <h5>Naman Choudhary</h5>
                                        <p>Senior Campaign Manager</p>
                                        <div class="contact-info">
                                            <span>üìß naman.choudhary@adgenie.net</span>
                                            <span>üì± +1-555-0124</span>
                                            <span>üí¨ @naman.choudhary</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Team Members -->
                <div class="card">
                    <div class="card__header">
                        <h3>Team Members</h3>
                    </div>
                    <div class="card__body">
                        <div class="table-container">
                            <table class="team-table">
                                <thead>
                                    <tr>
                                        <th>Member</th>
                                        <th>Role</th>
                                        <th>Timezone</th>
                                        <th>Contact</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="team-tbody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alert Management Tab -->
            <div class="tab-content" id="alerts">
                <div class="content-header">
                    <h2>Alert Management</h2>
                    <button class="btn btn--primary" id="add-rule-btn">+ Create Alert Rule</button>
                </div>

                <!-- Active Alerts -->
                <div class="card">
                    <div class="card__header">
                        <h3>Active Alerts</h3>
                    </div>
                    <div class="card__body">
                        <div id="active-alerts-container">
                        </div>
                    </div>
                </div>

                <!-- Alert Rules -->
                <div class="card">
                    <div class="card__header">
                        <h3>Alert Rules Configuration</h3>
                    </div>
                    <div class="card__body">
                        <div class="table-container">
                            <table class="rules-table">
                                <thead>
                                    <tr>
                                        <th>Rule Name</th>
                                        <th>Metric</th>
                                        <th>Threshold</th>
                                        <th>Priority</th>
                                        <th>Platforms</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="rules-tbody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Member Modal -->
    <div class="modal hidden" id="member-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="member-modal-title">Add Team Member</h3>
                <button class="modal-close" id="member-modal-close">&times;</button>
            </div>
            <form id="member-form" class="modal-body">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-control" name="name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" name="email" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone</label>
                    <input type="tel" class="form-control" name="phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Slack Handle</label>
                    <input type="text" class="form-control" name="slack" placeholder="@username">
                </div>
                <div class="form-group">
                    <label class="form-label">Role</label>
                    <select class="form-control" name="role" required>
                        <option value="">Select Role</option>
                        <option value="Campaign Manager">Campaign Manager</option>
                        <option value="Senior Campaign Manager">Senior Campaign Manager</option>
                        <option value="Team Lead">Team Lead</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Timezone</label>
                    <select class="form-control" name="timezone" required>
                        <option value="">Select Timezone</option>
                        <option value="America/New_York">Eastern Time</option>
                        <option value="America/Los_Angeles">Pacific Time</option>
                        <option value="Asia/Kolkata">India Time</option>
                        <option value="Europe/London">London Time</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--secondary" id="member-cancel">Cancel</button>
                    <button type="submit" class="btn btn--primary">Save Member</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Rule Modal -->
    <div class="modal hidden" id="rule-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="rule-modal-title">Create Alert Rule</h3>
                <button class="modal-close" id="rule-modal-close">&times;</button>
            </div>
            <form id="rule-form" class="modal-body">
                <div class="form-group">
                    <label class="form-label">Rule Name</label>
                    <input type="text" class="form-control" name="name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Metric Type</label>
                    <select class="form-control" name="metricType" required>
                        <option value="">Select Metric</option>
                        <option value="cpc">Cost Per Click (CPC)</option>
                        <option value="ctr">Click Through Rate (CTR)</option>
                        <option value="conversionRate">Conversion Rate</option>
                        <option value="spend">Spend</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Threshold (%)</label>
                    <input type="number" class="form-control" name="threshold" min="1" max="100" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Condition</label>
                    <select class="form-control" name="operator" required>
                        <option value="">Select Condition</option>
                        <option value="increase">Increase by threshold</option>
                        <option value="decrease">Decrease by threshold</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <select class="form-control" name="priority" required>
                        <option value="">Select Priority</option>
                        <option value="P0">P0 - Critical</option>
                        <option value="P1">P1 - High</option>
                        <option value="P2">P2 - Medium</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Platforms</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="platforms" value="google"> Google Ads</label>
                        <label><input type="checkbox" name="platforms" value="meta"> Meta Ads</label>
                        <label><input type="checkbox" name="platforms" value="tiktok"> TikTok Ads</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--secondary" id="rule-cancel">Cancel</button>
                    <button type="submit" class="btn btn--primary">Save Rule</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
<script>
// Application Data with previous values for comparison
let appData = {
  campaigns: [
    {
      id: "camp_001",
      name: "Brand Search - US",
      platform: "google",
      status: "active",
      spend: 15420.50,
      impressions: 245680,
      clicks: 12284,
      conversions: 734,
      ctr: 5.0,
      cpc: 1.25,
      conversionRate: 5.97,
      alertStatus: "normal",
      lastUpdated: "2025-09-19T17:45:00Z",
      previousValues: {
        spend: 15200.25,
        impressions: 243500,
        clicks: 12100,
        conversions: 720,
        ctr: 4.95,
        cpc: 1.20,
        conversionRate: 5.90
      }
    },
    {
      id: "camp_002", 
      name: "Shopping Campaign",
      platform: "google",
      status: "active",
      spend: 8930.25,
      impressions: 89450,
      clicks: 3578,
      conversions: 286,
      ctr: 4.0,
      cpc: 2.50,
      conversionRate: 8.0,
      alertStatus: "warning",
      lastUpdated: "2025-09-19T17:44:00Z",
      previousValues: {
        spend: 8800.10,
        impressions: 88900,
        clicks: 3600,
        conversions: 290,
        ctr: 4.05,
        cpc: 2.45,
        conversionRate: 8.06
      }
    },
    {
      id: "camp_003",
      name: "Display Prospecting",
      platform: "meta",
      status: "active", 
      spend: 12680.75,
      impressions: 456780,
      clicks: 9135,
      conversions: 548,
      ctr: 2.0,
      cpc: 1.39,
      conversionRate: 6.0,
      alertStatus: "critical",
      lastUpdated: "2025-09-19T17:43:00Z",
      previousValues: {
        spend: 12500.00,
        impressions: 455000,
        clicks: 9200,
        conversions: 560,
        ctr: 2.02,
        cpc: 1.36,
        conversionRate: 6.09
      }
    },
    {
      id: "camp_004",
      name: "Video Campaign", 
      platform: "tiktok",
      status: "paused",
      spend: 5240.90,
      impressions: 123450,
      clicks: 2469,
      conversions: 123,
      ctr: 2.0,
      cpc: 2.12,
      conversionRate: 5.0,
      alertStatus: "normal",
      lastUpdated: "2025-09-19T17:42:00Z",
      previousValues: {
        spend: 5240.90,
        impressions: 123450,
        clicks: 2469,
        conversions: 123,
        ctr: 2.0,
        cpc: 2.12,
        conversionRate: 5.0
      }
    }
  ],
  teamMembers: [
    {
      id: "user_001",
      name: "Pooja Sharma",
      email: "pooja.sharma@adgenie.net",
      phone: "+91-98765-43212",
      slack: "@pooja.sharma",
      role: "Campaign Manager",
      timezone: "Asia/Kolkata",
      isPrimary: true,
      isSecondary: false
    },
    {
      id: "user_002",
      name: "Mike Rodriguez", 
      email: "mike.rodriguez@adgenie.net",
      phone: "+91-98765-43211",
      slack: "@mike.rodriguez",
      role: "Senior Campaign Manager",
      timezone: "Asia/Kolkata", 
      isPrimary: false,
      isSecondary: true
    },
    {
      id: "user_003",
      name: "Anmol Yadav",
      email: "anmol.yadav@adgenie.net", 
      phone: "+91-98765-43210",
      slack: "@anmol.yadav",
      role: "Campaign Manager",
      timezone: "Asia/Kolkata",
      isPrimary: false,
      isSecondary: false
    }
  ],
  alertRules: [
    {
      id: "rule_001",
      name: "CPC Spike Detection",
      metricType: "cpc",
      threshold: 50,
      operator: "increase",
      priority: "P0",
      enabled: true,
      platforms: ["google", "meta", "tiktok"],
      conditions: {
        minSpend: 100,
        minClicks: 50,
        duration: 15
      }
    },
    {
      id: "rule_002",
      name: "CTR Drop Alert",
      metricType: "ctr", 
      threshold: 30,
      operator: "decrease",
      priority: "P1",
      enabled: true,
      platforms: ["google", "meta"],
      conditions: {
        minImpressions: 1000,
        duration: 60
      }
    },
    {
      id: "rule_003",
      name: "Conversion Rate Drop",
      metricType: "conversionRate",
      threshold: 50,
      operator: "decrease", 
      priority: "P1",
      enabled: true,
      platforms: ["google", "meta", "tiktok"],
      conditions: {
        minConversions: 10,
        duration: 120
      }
    }
  ],
  alerts: [
    {
      id: "alert_001",
      campaignId: "camp_003",
      ruleId: "rule_001",
      type: "CPC Spike",
      priority: "P0",
      status: "triggered",
      message: "CPC increased by 61% from $1.39 to $2.24",
      triggeredAt: "2025-09-19T17:30:00Z",
      acknowledgedAt: null,
      resolvedAt: null,
      assignedTo: "user_001"
    },
    {
      id: "alert_002", 
      campaignId: "camp_002",
      ruleId: "rule_002",
      type: "CTR Drop",
      priority: "P1", 
      status: "acknowledged",
      message: "CTR dropped by 35% from 4.0% to 2.6%",
      triggeredAt: "2025-09-19T17:15:00Z", 
      acknowledgedAt: "2025-09-19T17:18:00Z",
      resolvedAt: null,
      assignedTo: "user_002"
    }
  ]
};

// Application State
let appState = {
  activeTab: 'dashboard',
  sortColumn: 'name',
  sortDirection: 'asc',
  searchQuery: '',
  platformFilter: 'all',
  editingMember: null,
  editingRule: null
};

// Live data update tracking
let updateIntervals = [];

// Utility Functions
function formatCurrency(amount) {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
    minimumFractionDigits: 2
  }).format(amount);
}

function formatNumber(number) {
  return new Intl.NumberFormat('en-US').format(number);
}

function formatPercentage(number) {
  return number.toFixed(1) + '%';
}

function formatDateTime(dateString) {
  return new Date(dateString).toLocaleString('en-US', {
    month: 'short',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  });
}

function generateId(prefix) {
  return `${prefix}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
}

function getInitials(name) {
  return name.split(' ').map(n => n[0]).join('').toUpperCase();
}

function getPlatformIcon(platform) {
  const icons = {
    'google': 'üîç',
    'meta': 'üìò',
    'tiktok': 'üéµ'
  };
  return icons[platform] || 'üìä';
}

// Live Data Animation Functions
function calculatePercentageChange(current, previous) {
  if (previous === 0) return 0;
  return ((current - previous) / previous) * 100;
}

function animateValueChange(element, newValue, oldValue, formatter = (v) => v, isIncrease = true) {
  if (!element) return;
  
  // Add animation class
  element.classList.add('metric-value');
  element.classList.add('metric-update-animation');
  
  // Add increase/decrease class for color
  const changeClass = isIncrease ? 'updating-increase' : 'updating-decrease';
  element.classList.add(changeClass);
  
  // Update the value with smooth transition
  setTimeout(() => {
    element.textContent = formatter(newValue);
  }, 200);
  
  // Remove classes after animation
  setTimeout(() => {
    element.classList.remove('metric-update-animation', changeClass);
  }, 2000);
}

function updateCampaignMetrics() {
  appData.campaigns.forEach(campaign => {
    if (campaign.status !== 'active') return;
    
    // Store previous values
    campaign.previousValues = {
      spend: campaign.spend,
      impressions: campaign.impressions,
      clicks: campaign.clicks,
      conversions: campaign.conversions,
      ctr: campaign.ctr,
      cpc: campaign.cpc,
      conversionRate: campaign.conversionRate
    };
    
    // Generate realistic changes (between -5% to +8%)
    const metrics = ['spend', 'impressions', 'clicks', 'conversions'];
    metrics.forEach(metric => {
      const changePercent = (Math.random() - 0.3) * 0.13; // Bias towards positive growth
      const currentValue = campaign[metric];
      const newValue = Math.max(0, currentValue * (1 + changePercent));
      
      if (metric === 'spend') {
        campaign[metric] = Math.round(newValue * 100) / 100; // 2 decimal places
      } else {
        campaign[metric] = Math.round(newValue);
      }
    });
    
    // Recalculate derived metrics
    campaign.ctr = campaign.impressions > 0 ? (campaign.clicks / campaign.impressions * 100) : 0;
    campaign.cpc = campaign.clicks > 0 ? (campaign.spend / campaign.clicks) : 0;
    campaign.conversionRate = campaign.clicks > 0 ? (campaign.conversions / campaign.clicks * 100) : 0;
    
    campaign.lastUpdated = new Date().toISOString();
  });
  
  // Update summary totals
  updateSummaryCards();
  
  // Update table if dashboard is active
  if (appState.activeTab === 'dashboard') {
    renderCampaignTable();
  }
}

function updateSummaryCards() {
  const totals = appData.campaigns.reduce((acc, campaign) => {
    acc.spend += campaign.spend;
    acc.impressions += campaign.impressions;
    acc.conversions += campaign.conversions;
    return acc;
  }, { spend: 0, impressions: 0, conversions: 0 });
  
  const previousTotals = appData.campaigns.reduce((acc, campaign) => {
    acc.spend += campaign.previousValues.spend;
    acc.impressions += campaign.previousValues.impressions;
    acc.conversions += campaign.previousValues.conversions;
    return acc;
  }, { spend: 0, impressions: 0, conversions: 0 });
  
  // Update spend
  const spendElement = document.querySelector('[data-metric="totalSpend"]');
  const spendChangeElement = document.querySelector('[data-change="totalSpend"]');
  if (spendElement && previousTotals.spend !== totals.spend) {
    const isIncrease = totals.spend > previousTotals.spend;
    const percentageChange = calculatePercentageChange(totals.spend, previousTotals.spend);
    
    animateValueChange(spendElement, totals.spend, previousTotals.spend, formatCurrency, isIncrease);
    
    if (spendChangeElement) {
      spendChangeElement.textContent = `${isIncrease ? '+' : ''}${percentageChange.toFixed(1)}%`;
      spendChangeElement.className = `summary-change ${isIncrease ? 'positive' : 'negative'}`;
    }
  }
  
  // Update impressions
  const impressionsElement = document.querySelector('[data-metric="totalImpressions"]');
  const impressionsChangeElement = document.querySelector('[data-change="totalImpressions"]');
  if (impressionsElement && previousTotals.impressions !== totals.impressions) {
    const isIncrease = totals.impressions > previousTotals.impressions;
    const percentageChange = calculatePercentageChange(totals.impressions, previousTotals.impressions);
    
    animateValueChange(impressionsElement, totals.impressions, previousTotals.impressions, formatNumber, isIncrease);
    
    if (impressionsChangeElement) {
      impressionsChangeElement.textContent = `${isIncrease ? '+' : ''}${percentageChange.toFixed(1)}%`;
      impressionsChangeElement.className = `summary-change ${isIncrease ? 'positive' : 'negative'}`;
    }
  }
  
  // Update conversions
  const conversionsElement = document.querySelector('[data-metric="totalConversions"]');
  const conversionsChangeElement = document.querySelector('[data-change="totalConversions"]');
  if (conversionsElement && previousTotals.conversions !== totals.conversions) {
    const isIncrease = totals.conversions > previousTotals.conversions;
    const percentageChange = calculatePercentageChange(totals.conversions, previousTotals.conversions);
    
    animateValueChange(conversionsElement, totals.conversions, previousTotals.conversions, formatNumber, isIncrease);
    
    if (conversionsChangeElement) {
      conversionsChangeElement.textContent = `${isIncrease ? '+' : ''}${percentageChange.toFixed(1)}%`;
      conversionsChangeElement.className = `summary-change ${isIncrease ? 'positive' : 'negative'}`;
    }
  }
}

// Tab Navigation - Fixed implementation
function switchTab(tabId) {
  console.log(`Switching to tab: ${tabId}`);
  
  // Update nav buttons
  document.querySelectorAll('.nav-tab').forEach(btn => {
    btn.classList.remove('active');
    if (btn.getAttribute('data-tab') === tabId) {
      btn.classList.add('active');
    }
  });
  
  // Update content visibility
  document.querySelectorAll('.tab-content').forEach(content => {
    content.classList.remove('active');
    if (content.id === tabId) {
      content.classList.add('active');
    }
  });
  
  // Update app state
  appState.activeTab = tabId;
  
  // Load tab-specific content
  switch(tabId) {
    case 'dashboard':
      loadDashboard();
      break;
    case 'roster':
      loadRoster();
      break;
    case 'alerts':
      loadAlerts();
      break;
  }
}

// Dashboard Functions
function loadDashboard() {
  console.log('Loading dashboard...');
  renderCampaignTable();
  updateSummaryCards();
  setupDashboardEventListeners();
}

function renderCampaignTable() {
  const campaignsTbody = document.getElementById('campaigns-tbody');
  if (!campaignsTbody) {
    console.error('Campaign table body not found');
    return;
  }
  
  let campaigns = [...appData.campaigns];
  
  // Apply search filter
  if (appState.searchQuery.trim()) {
    const query = appState.searchQuery.toLowerCase().trim();
    campaigns = campaigns.filter(campaign =>
      campaign.name.toLowerCase().includes(query) ||
      campaign.platform.toLowerCase().includes(query)
    );
    console.log(`Filtered campaigns by "${appState.searchQuery}": ${campaigns.length} results`);
  }
  
  // Apply platform filter
  if (appState.platformFilter !== 'all') {
    campaigns = campaigns.filter(campaign =>
      campaign.platform === appState.platformFilter
    );
  }
  
  // Apply sorting
  campaigns.sort((a, b) => {
    const aValue = a[appState.sortColumn];
    const bValue = b[appState.sortColumn];
    
    if (typeof aValue === 'number') {
      return appState.sortDirection === 'asc' ? aValue - bValue : bValue - aValue;
    } else {
      const result = aValue.toString().localeCompare(bValue.toString());
      return appState.sortDirection === 'asc' ? result : -result;
    }
  });
  
  campaignsTbody.innerHTML = campaigns.map(campaign => {
    // Calculate percentage changes for display
    const spendChange = calculatePercentageChange(campaign.spend, campaign.previousValues.spend);
    const impressionsChange = calculatePercentageChange(campaign.impressions, campaign.previousValues.impressions);
    const ctrChange = calculatePercentageChange(campaign.ctr, campaign.previousValues.ctr);
    const cpcChange = calculatePercentageChange(campaign.cpc, campaign.previousValues.cpc);
    const conversionsChange = calculatePercentageChange(campaign.conversions, campaign.previousValues.conversions);
    
    return `
      <tr>
        <td>
          <strong>${campaign.name}</strong>
          <br>
          <small style="color: var(--color-text-secondary);">ID: ${campaign.id}</small>
        </td>
        <td>
          <div class="platform-badge ${campaign.platform}">
            ${getPlatformIcon(campaign.platform)}
            ${campaign.platform.toUpperCase()}
          </div>
        </td>
        <td>
          <span class="status-badge ${campaign.status}">
            ${campaign.status}
          </span>
        </td>
        <td>
          <span class="metric-value" data-campaign="${campaign.id}" data-metric="spend">
            ${formatCurrency(campaign.spend)}
          </span>
          ${Math.abs(spendChange) > 0.1 ? `<span class="percentage-change ${spendChange > 0 ? 'positive' : 'negative'} show">${spendChange > 0 ? '+' : ''}${spendChange.toFixed(1)}%</span>` : ''}
        </td>
        <td>
          <span class="metric-value" data-campaign="${campaign.id}" data-metric="impressions">
            ${formatNumber(campaign.impressions)}
          </span>
          ${Math.abs(impressionsChange) > 0.1 ? `<span class="percentage-change ${impressionsChange > 0 ? 'positive' : 'negative'} show">${impressionsChange > 0 ? '+' : ''}${impressionsChange.toFixed(1)}%</span>` : ''}
        </td>
        <td>
          <span class="metric-value" data-campaign="${campaign.id}" data-metric="ctr">
            ${formatPercentage(campaign.ctr)}
          </span>
          ${Math.abs(ctrChange) > 0.1 ? `<span class="percentage-change ${ctrChange > 0 ? 'positive' : 'negative'} show">${ctrChange > 0 ? '+' : ''}${ctrChange.toFixed(1)}%</span>` : ''}
        </td>
        <td>
          <span class="metric-value" data-campaign="${campaign.id}" data-metric="cpc">
            ${formatCurrency(campaign.cpc)}
          </span>
          ${Math.abs(cpcChange) > 0.1 ? `<span class="percentage-change ${cpcChange > 0 ? 'positive' : 'negative'} show">${cpcChange > 0 ? '+' : ''}${cpcChange.toFixed(1)}%</span>` : ''}
        </td>
        <td>
          <span class="metric-value" data-campaign="${campaign.id}" data-metric="conversions">
            ${formatNumber(campaign.conversions)}
          </span>
          ${Math.abs(conversionsChange) > 0.1 ? `<span class="percentage-change ${conversionsChange > 0 ? 'positive' : 'negative'} show">${conversionsChange > 0 ? '+' : ''}${conversionsChange.toFixed(1)}%</span>` : ''}
        </td>
        <td>
          <span class="alert-indicator ${campaign.alertStatus}">
            ${campaign.alertStatus === 'critical' ? 'üî¥' : campaign.alertStatus === 'warning' ? 'üü°' : 'üü¢'}
            ${campaign.alertStatus.toUpperCase()}
          </span>
        </td>
      </tr>
    `;
  }).join('');
}

function setupDashboardEventListeners() {
  // Search functionality
  const searchInput = document.querySelector('.search-input');
  if (searchInput) {
    // Remove existing listeners by cloning
    const newSearchInput = searchInput.cloneNode(true);
    searchInput.parentNode.replaceChild(newSearchInput, searchInput);
    
    newSearchInput.addEventListener('input', (e) => {
      appState.searchQuery = e.target.value;
      console.log(`Search query: "${appState.searchQuery}"`);
      renderCampaignTable();
    });
  }
  
  // Platform filter
  const platformFilter = document.querySelector('.platform-filter');
  if (platformFilter) {
    // Remove existing listeners by cloning
    const newPlatformFilter = platformFilter.cloneNode(true);
    platformFilter.parentNode.replaceChild(newPlatformFilter, platformFilter);
    
    newPlatformFilter.addEventListener('change', (e) => {
      appState.platformFilter = e.target.value;
      console.log(`Platform filter: ${appState.platformFilter}`);
      renderCampaignTable();
    });
  }
  
  // Table sorting
  document.querySelectorAll('[data-sort]').forEach(header => {
    // Remove existing listeners by cloning
    const newHeader = header.cloneNode(true);
    header.parentNode.replaceChild(newHeader, header);
    
    newHeader.addEventListener('click', (e) => {
      const column = e.currentTarget.dataset.sort;
      if (appState.sortColumn === column) {
        appState.sortDirection = appState.sortDirection === 'asc' ? 'desc' : 'asc';
      } else {
        appState.sortColumn = column;
        appState.sortDirection = 'asc';
      }
      console.log(`Sorting by ${column} ${appState.sortDirection}`);
      renderCampaignTable();
    });
  });
}

// Roster Functions
function loadRoster() {
  console.log('Loading roster...');
  renderTeamTable();
  setupRosterEventListeners();
}

function renderTeamTable() {
  const teamTbody = document.getElementById('team-tbody');
  if (!teamTbody) {
    console.error('Team table body not found');
    return;
  }
  
  teamTbody.innerHTML = appData.teamMembers.map(member => `
    <tr>
      <td>
        <div style="display: flex; align-items: center; gap: 12px;">
          <div class="member-avatar" style="width: 40px; height: 40px; font-size: 14px;">
            ${getInitials(member.name)}
          </div>
          <div>
            <strong>${member.name}</strong>
            <br>
            <small style="color: var(--color-text-secondary);">${member.email}</small>
          </div>
        </div>
      </td>
      <td>${member.role}</td>
      <td>${member.timezone}</td>
      <td>
        <div style="font-size: 12px;">
          <div>üì± ${member.phone}</div>
          <div>üí¨ ${member.slack}</div>
        </div>
      </td>
      <td>
        ${member.isPrimary ? '<span class="status--success status">Primary</span>' : ''}
        ${member.isSecondary ? '<span class="status--warning status">Secondary</span>' : ''}
        ${!member.isPrimary && !member.isSecondary ? '<span class="status--info status">Available</span>' : ''}
      </td>
      <td>
        <button class="action-btn edit" onclick="editMember('${member.id}')">Edit</button>
        <button class="action-btn delete" onclick="deleteMember('${member.id}')">Delete</button>
      </td>
    </tr>
  `).join('');
}

function setupRosterEventListeners() {
  const addMemberBtn = document.getElementById('add-member-btn');
  if (addMemberBtn) {
    // Remove existing listeners by cloning
    const newBtn = addMemberBtn.cloneNode(true);
    addMemberBtn.parentNode.replaceChild(newBtn, addMemberBtn);
    
    newBtn.addEventListener('click', (e) => {
      e.preventDefault();
      console.log('Add member button clicked');
      appState.editingMember = null;
      showMemberModal();
    });
  }
}

// Alert Management Functions
function loadAlerts() {
  console.log('Loading alerts...');
  renderActiveAlerts();
  renderAlertRules();
  setupAlertsEventListeners();
}

function renderActiveAlerts() {
  const activeAlertsContainer = document.getElementById('active-alerts-container');
  if (!activeAlertsContainer) {
    console.error('Active alerts container not found');
    return;
  }
  
  if (appData.alerts.length === 0) {
    activeAlertsContainer.innerHTML = '<p style="color: var(--color-text-secondary);">No active alerts</p>';
    return;
  }
  
  activeAlertsContainer.innerHTML = appData.alerts.map(alert => {
    const campaign = appData.campaigns.find(c => c.id === alert.campaignId);
    const assignedMember = appData.teamMembers.find(m => m.id === alert.assignedTo);
    
    return `
      <div class="alert-item ${alert.status}">
        <div class="alert-content">
          <h4 class="alert-title">${alert.type} - ${campaign?.name || 'Unknown Campaign'}</h4>
          <p class="alert-message">${alert.message}</p>
          <div class="alert-meta">
            <span>Priority: <span class="priority-badge ${alert.priority}">${alert.priority}</span></span>
            <span>Triggered: ${formatDateTime(alert.triggeredAt)}</span>
            <span>Assigned: ${assignedMember?.name || 'Unassigned'}</span>
          </div>
        </div>
        <div class="alert-actions">
          ${alert.status === 'triggered' ? 
            `<button class="btn btn--sm btn--primary" onclick="acknowledgeAlert('${alert.id}')">Acknowledge</button>` :
            ''
          }
          ${alert.status === 'acknowledged' ? 
            `<button class="btn btn--sm btn--primary" onclick="resolveAlert('${alert.id}')">Resolve</button>` :
            ''
          }
        </div>
      </div>
    `;
  }).join('');
}

function renderAlertRules() {
  const rulesTbody = document.getElementById('rules-tbody');
  if (!rulesTbody) {
    console.error('Rules table body not found');
    return;
  }
  
  rulesTbody.innerHTML = appData.alertRules.map(rule => `
    <tr>
      <td>
        <strong>${rule.name}</strong>
      </td>
      <td>${rule.metricType.toUpperCase()}</td>
      <td>${rule.threshold}% ${rule.operator}</td>
      <td><span class="priority-badge ${rule.priority}">${rule.priority}</span></td>
      <td>
        ${rule.platforms.map(platform => `
          <span class="platform-badge ${platform}" style="margin-right: 4px; font-size: 10px;">
            ${platform.toUpperCase()}
          </span>
        `).join('')}
      </td>
      <td>
        <span class="status-badge ${rule.enabled ? 'active' : 'paused'}">
          ${rule.enabled ? 'Enabled' : 'Disabled'}
        </span>
      </td>
      <td>
        <button class="action-btn edit" onclick="editRule('${rule.id}')">Edit</button>
        <button class="action-btn delete" onclick="deleteRule('${rule.id}')">Delete</button>
      </td>
    </tr>
  `).join('');
}

function setupAlertsEventListeners() {
  const addRuleBtn = document.getElementById('add-rule-btn');
  if (addRuleBtn) {
    // Remove existing listeners by cloning
    const newBtn = addRuleBtn.cloneNode(true);
    addRuleBtn.parentNode.replaceChild(newBtn, addRuleBtn);
    
    newBtn.addEventListener('click', (e) => {
      e.preventDefault();
      console.log('Add rule button clicked');
      appState.editingRule = null;
      showRuleModal();
    });
  }
}

// Modal Functions
function showMemberModal() {
  const memberModal = document.getElementById('member-modal');
  const memberForm = document.getElementById('member-form');
  if (!memberModal || !memberForm) {
    console.error('Member modal elements not found');
    return;
  }
  
  console.log('Showing member modal');
  
  const title = document.getElementById('member-modal-title');
  if (title) {
    title.textContent = appState.editingMember ? 'Edit Team Member' : 'Add Team Member';
  }
  
  if (appState.editingMember) {
    const member = appData.teamMembers.find(m => m.id === appState.editingMember);
    if (member && memberForm.elements) {
      memberForm.elements.name.value = member.name;
      memberForm.elements.email.value = member.email;
      memberForm.elements.phone.value = member.phone;
      memberForm.elements.slack.value = member.slack;
      memberForm.elements.role.value = member.role;
      memberForm.elements.timezone.value = member.timezone;
    }
  } else {
    memberForm.reset();
  }
  
  memberModal.classList.remove('hidden');
}

function showRuleModal() {
  const ruleModal = document.getElementById('rule-modal');
  const ruleForm = document.getElementById('rule-form');
  if (!ruleModal || !ruleForm) {
    console.error('Rule modal elements not found');
    return;
  }
  
  console.log('Showing rule modal');
  
  const title = document.getElementById('rule-modal-title');
  if (title) {
    title.textContent = appState.editingRule ? 'Edit Alert Rule' : 'Create Alert Rule';
  }
  
  if (appState.editingRule) {
    const rule = appData.alertRules.find(r => r.id === appState.editingRule);
    if (rule && ruleForm.elements) {
      ruleForm.elements.name.value = rule.name;
      ruleForm.elements.metricType.value = rule.metricType;
      ruleForm.elements.threshold.value = rule.threshold;
      ruleForm.elements.operator.value = rule.operator;
      ruleForm.elements.priority.value = rule.priority;
      
      // Check platform checkboxes
      const platformCheckboxes = ruleForm.querySelectorAll('input[name="platforms"]');
      platformCheckboxes.forEach(checkbox => {
        checkbox.checked = rule.platforms.includes(checkbox.value);
      });
    }
  } else {
    ruleForm.reset();
  }
  
  ruleModal.classList.remove('hidden');
}

function hideMemberModal() {
  const memberModal = document.getElementById('member-modal');
  if (memberModal) {
    memberModal.classList.add('hidden');
  }
  appState.editingMember = null;
}

function hideRuleModal() {
  const ruleModal = document.getElementById('rule-modal');
  if (ruleModal) {
    ruleModal.classList.add('hidden');
  }
  appState.editingRule = null;
}

// CRUD Operations - Make them global functions
window.editMember = function(memberId) {
  console.log('Edit member:', memberId);
  appState.editingMember = memberId;
  showMemberModal();
};

window.deleteMember = function(memberId) {
  if (confirm('Are you sure you want to delete this team member?')) {
    appData.teamMembers = appData.teamMembers.filter(m => m.id !== memberId);
    renderTeamTable();
  }
};

window.editRule = function(ruleId) {
  console.log('Edit rule:', ruleId);
  appState.editingRule = ruleId;
  showRuleModal();
};

window.deleteRule = function(ruleId) {
  if (confirm('Are you sure you want to delete this alert rule?')) {
    appData.alertRules = appData.alertRules.filter(r => r.id !== ruleId);
    renderAlertRules();
  }
};

window.acknowledgeAlert = function(alertId) {
  console.log('Acknowledge alert:', alertId);
  const alert = appData.alerts.find(a => a.id === alertId);
  if (alert) {
    alert.status = 'acknowledged';
    alert.acknowledgedAt = new Date().toISOString();
    renderActiveAlerts();
  }
};

window.resolveAlert = function(alertId) {
  console.log('Resolve alert:', alertId);
  const alert = appData.alerts.find(a => a.id === alertId);
  if (alert) {
    alert.status = 'resolved';
    alert.resolvedAt = new Date().toISOString();
    
    // Remove from active alerts
    appData.alerts = appData.alerts.filter(a => a.id !== alertId);
    renderActiveAlerts();
  }
};

// Form Submission Handlers
function handleMemberFormSubmit(e) {
  e.preventDefault();
  
  const formData = new FormData(e.target);
  const memberData = {
    name: formData.get('name'),
    email: formData.get('email'),
    phone: formData.get('phone'),
    slack: formData.get('slack'),
    role: formData.get('role'),
    timezone: formData.get('timezone'),
    isPrimary: false,
    isSecondary: false
  };
  
  if (appState.editingMember) {
    // Update existing member
    const memberIndex = appData.teamMembers.findIndex(m => m.id === appState.editingMember);
    if (memberIndex !== -1) {
      appData.teamMembers[memberIndex] = {
        ...appData.teamMembers[memberIndex],
        ...memberData
      };
    }
  } else {
    // Add new member
    memberData.id = generateId('user');
    appData.teamMembers.push(memberData);
  }
  
  renderTeamTable();
  hideMemberModal();
}

function handleRuleFormSubmit(e) {
  e.preventDefault();
  
  const formData = new FormData(e.target);
  const selectedPlatforms = [];
  
  formData.getAll('platforms').forEach(platform => {
    selectedPlatforms.push(platform);
  });
  
  const ruleData = {
    name: formData.get('name'),
    metricType: formData.get('metricType'),
    threshold: parseInt(formData.get('threshold')),
    operator: formData.get('operator'),
    priority: formData.get('priority'),
    platforms: selectedPlatforms,
    enabled: true,
    conditions: {}
  };
  
  if (appState.editingRule) {
    // Update existing rule
    const ruleIndex = appData.alertRules.findIndex(r => r.id === appState.editingRule);
    if (ruleIndex !== -1) {
      appData.alertRules[ruleIndex] = {
        ...appData.alertRules[ruleIndex],
        ...ruleData
      };
    }
  } else {
    // Add new rule
    ruleData.id = generateId('rule');
    appData.alertRules.push(ruleData);
  }
  
  renderAlertRules();
  hideRuleModal();
}

// Event Listeners Setup
function setupEventListeners() {
  // Tab navigation - Fixed approach
  document.querySelectorAll('.nav-tab').forEach(button => {
    button.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      const tabId = button.getAttribute('data-tab');
      console.log(`Tab navigation clicked: ${tabId}`);
      switchTab(tabId);
    });
  });
  
  // Modal close handlers
  const memberModalClose = document.getElementById('member-modal-close');
  const memberCancel = document.getElementById('member-cancel');
  const ruleModalClose = document.getElementById('rule-modal-close');
  const ruleCancel = document.getElementById('rule-cancel');
  
  if (memberModalClose) memberModalClose.addEventListener('click', hideMemberModal);
  if (memberCancel) memberCancel.addEventListener('click', hideMemberModal);
  if (ruleModalClose) ruleModalClose.addEventListener('click', hideRuleModal);
  if (ruleCancel) ruleCancel.addEventListener('click', hideRuleModal);
  
  // Modal overlay close
  const memberOverlay = document.querySelector('#member-modal .modal-overlay');
  const ruleOverlay = document.querySelector('#rule-modal .modal-overlay');
  
  if (memberOverlay) memberOverlay.addEventListener('click', hideMemberModal);
  if (ruleOverlay) ruleOverlay.addEventListener('click', hideRuleModal);
  
  // Form submissions
  const memberForm = document.getElementById('member-form');
  const ruleForm = document.getElementById('rule-form');
  if (memberForm) memberForm.addEventListener('submit', handleMemberFormSubmit);
  if (ruleForm) ruleForm.addEventListener('submit', handleRuleFormSubmit);
  
  // Escape key to close modals
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      hideMemberModal();
      hideRuleModal();
    }
  });
}

// Live Data Simulation
function startLiveDataUpdates() {
  // Clear any existing intervals
  updateIntervals.forEach(interval => clearInterval(interval));
  updateIntervals = [];
  
  // Update metrics every 4 seconds
  const metricUpdateInterval = setInterval(() => {
    console.log('Updating campaign metrics...');
    updateCampaignMetrics();
  }, 4000);
  
  updateIntervals.push(metricUpdateInterval);
  
  console.log('Live data updates started');
}

// Application Initialization
function initializeApp() {
  console.log('Initializing AdGenie - Campaign Anomaly Detection System...');
  
  try {
    // Setup event listeners
    setupEventListeners();
    
    // Load initial content (Dashboard)
    switchTab('dashboard');
    
    // Start live data updates
    startLiveDataUpdates();
    
    console.log('AdGenie application initialized successfully!');
  } catch (error) {
    console.error('Error initializing application:', error);
  }
}

// Start the application when DOM is loaded
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initializeApp);
} else {
  // DOM is already loaded
  initializeApp();
}
</script>
</body>
</html>